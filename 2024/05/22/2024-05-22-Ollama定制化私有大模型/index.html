<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/imgs/logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/imgs/32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/imgs/16.png">
  <link rel="mask-icon" href="/imgs/logo.png" color="#222">
  <meta name="google-site-verification" content="dJfRF5_6EbT_bJo2wTKbSXTDmNaOTqDGRDMcU6ylduk">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ghyghoo8.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null,"activeClass":"livere"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="拥有自己的私有大模型在本教程中，我们将探索如何使用 Ollama 提供的 Modelfile 机制来定制自己的大型语言模型 (LLM)。我们将以 llama3:8b 为例，展示自定义过程。 引言今天，我将分享如何利用 Modelfile 创建新的模型或调整已有模型，以适应特定的应用场景。这包括内嵌自定义提示、修改上下文长度、温度、随机种子、减少废话程度以及增加或减少输出多样性等（这不是微调，只是">
<meta property="og:type" content="article">
<meta property="og:title" content="Ollama - 定制化私有大模型">
<meta property="og:url" content="https://ghyghoo8.github.io/2024/05/22/2024-05-22-Ollama%E5%AE%9A%E5%88%B6%E5%8C%96%E7%A7%81%E6%9C%89%E5%A4%A7%E6%A8%A1%E5%9E%8B/index.html">
<meta property="og:site_name" content="G8空间">
<meta property="og:description" content="拥有自己的私有大模型在本教程中，我们将探索如何使用 Ollama 提供的 Modelfile 机制来定制自己的大型语言模型 (LLM)。我们将以 llama3:8b 为例，展示自定义过程。 引言今天，我将分享如何利用 Modelfile 创建新的模型或调整已有模型，以适应特定的应用场景。这包括内嵌自定义提示、修改上下文长度、温度、随机种子、减少废话程度以及增加或减少输出多样性等（这不是微调，只是">
<meta property="og:locale">
<meta property="og:image" content="https://ghyghoo8.github.io/imgs/a/models/a.jpg">
<meta property="og:image" content="https://ghyghoo8.github.io/imgs/a/models/b.jpg">
<meta property="article:published_time" content="2024-05-21T16:00:00.000Z">
<meta property="article:modified_time" content="2025-03-15T07:37:17.098Z">
<meta property="article:author" content="ghyghoo8">
<meta property="article:tag" content="ollama">
<meta property="article:tag" content="入门">
<meta property="article:tag" content="新手教程">
<meta property="article:tag" content="手册">
<meta property="article:tag" content="微调">
<meta property="article:tag" content="量化">
<meta property="article:tag" content="定制化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ghyghoo8.github.io/imgs/a/models/a.jpg">

<link rel="canonical" href="https://ghyghoo8.github.io/2024/05/22/2024-05-22-Ollama%E5%AE%9A%E5%88%B6%E5%8C%96%E7%A7%81%E6%9C%89%E5%A4%A7%E6%A8%A1%E5%9E%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>Ollama - 定制化私有大模型 | G8空间</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7923526446101866" crossorigin="anonymous"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.css" /><style>#sakana-widget{position:fixed;bottom:0;left:0;}</style><!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="G8空间" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">G8空间</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ghyghoo8的沉淀小碎</p>
      <a>
        <img class="custom-logo-image" src="/imgs/IMG_0001.PNG" alt="G8空间">
      </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook" rel="section"><i class="fa fa-comment fa-fw"></i>guestbook</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2doeWdob284" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://ghyghoo8.github.io/2024/05/22/2024-05-22-Ollama%E5%AE%9A%E5%88%B6%E5%8C%96%E7%A7%81%E6%9C%89%E5%A4%A7%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ghyghoo8">
      <meta itemprop="description" content="碎了一地...o(*￣︶￣*)o...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="G8空间">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Ollama - 定制化私有大模型
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-05-22 00:00:00" itemprop="dateCreated datePublished" datetime="2024-05-22T00:00:00+08:00">2024-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-15 15:37:17" itemprop="dateModified" datetime="2025-03-15T15:37:17+08:00">2025-03-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/llm/" itemprop="url" rel="index"><span itemprop="name">llm</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <hr>
<h3 id="拥有自己的私有大模型"><a href="#拥有自己的私有大模型" class="headerlink" title="拥有自己的私有大模型"></a>拥有自己的私有大模型</h3><p>在本教程中，我们将探索如何使用 Ollama 提供的 Modelfile 机制来定制自己的大型语言模型 (LLM)。我们将以 <code>llama3:8b</code> 为例，展示自定义过程。</p>
<h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><p>今天，我将分享如何利用 Modelfile 创建新的模型或调整已有模型，以适应特定的应用场景。这包括内嵌自定义提示、修改上下文长度、温度、随机种子、减少废话程度以及增加或减少输出多样性等（这不是微调，只是调整模型原参数）。</p>
<h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><p>在开始定制之前，您需要准备以下几点：</p>
<ol>
<li><p>安装 <a target="_blank" rel="noopener" href="https://ollama.com/download"><strong>Ollama</strong></a></p>
</li>
<li><p>下载并初始化一个新的模型版本：<code>ollama pull llama3:8b</code></p>
</li>
<li><p>确保能成功运行已下载的大语言模型：<code>ollama run llama3:8b</code></p>
</li>
</ol>
<h4 id="创建-Modelfile"><a href="#创建-Modelfile" class="headerlink" title="创建 Modelfile"></a>创建 Modelfile</h4><p>使用 <code>ollama show</code> 命令生成 Modelfile：<code>ollama show llama3:8b --modelfile &gt; myllama3.modelfile</code></p>
<p>Modelfile 的内容如下所示：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Modelfile generated by &quot;ollama show&quot;</span></span><br><span class="line"><span class="section"># To build a new Modelfile based on this, replace FROM with:</span></span><br><span class="line"><span class="section"># FROM llama3:latest</span></span><br><span class="line"></span><br><span class="line">FROM /Users/yourname/.ollama/models/blobs/sha256-00e1317cbf74d901080d7100f57580ba8dd8de57203072dc6f668324ba545f29</span><br><span class="line">TEMPLATE &quot;&#123;&#123; if .System &#125;&#125;&#123;&#123; .System&#125;&#125;&#123;&#123; end &#125;&#125;&quot;&#123;&#123; if .Prompt &#125;&#125;&#123;&#123; .Prompt&#125;&#125;&#123;&#123; end &#125;&#125;&quot;&#123;&#123; .Response &#125;&#125;&quot;</span><br><span class="line"></span><br><span class="line">PARAMETER stop &quot;reserved<span class="emphasis">_special_</span>token&quot;</span><br><span class="line">LICENSE &quot;META LLAMA 3 COMMUNITY LICENSE AGREEMENT&quot;</span><br></pre></td></tr></table></figure>

<p>例举一些其他模型的modelfile模板:</p>
<ul>
<li>mixtral</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM /Users/user/data/ollama-file/models/MiniCPM-Llama3-V-2<span class="emphasis">_5/model/model-Q4_</span>K<span class="emphasis">_M.gguf</span></span><br><span class="line"><span class="emphasis">TEMPLATE [INST] &#123;&#123; if .System &#125;&#125;&#123;&#123; .System &#125;&#125; &#123;&#123; end &#125;&#125;&#123;&#123; .Prompt &#125;&#125; [/INST]</span></span><br><span class="line"><span class="emphasis">PARAMETER stop [INST]</span></span><br><span class="line"><span class="emphasis">PARAMETER stop [/INST]</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">LICENSE &quot;&quot;&quot; Apache License  Version 2.0, January 2004 &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>llava</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">FROM /Users/user/data/ollama-file/models/MiniCPM-Llama3-V-2_5/model/model-8B-F16.gguf</span><br><span class="line">TEMPLATE &quot;&lt;|im_start|&gt;system</span><br><span class="line">&#123;&#123; .System &#125;&#125;&lt;|im_end|&gt;</span><br><span class="line">&lt;|im_start|&gt;user</span><br><span class="line">&#123;&#123; .Prompt &#125;&#125;&lt;|im_end|&gt;</span><br><span class="line">&lt;|im_start|&gt;assistant</span><br><span class="line">&quot;</span><br><span class="line">PARAMETER stop &lt;|im_start|&gt;</span><br><span class="line">PARAMETER stop &lt;|im_end|&gt;</span><br><span class="line"></span><br><span class="line">LICENSE &quot;&quot;&quot; Apache License  Version 2.0, January 2004 &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>other</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FROM /Users/user/.ollama/models/blobs/sha256-eb569aba7d65cf3da1d0369610eb6869f4a53ee369992a804d5810a80e9fa035</span><br><span class="line">TEMPLATE &quot;&#123;&#123; if .System &#125;&#125;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .System &#125;&#125;&lt;|eot_id|&gt;&#123;&#123; end &#125;&#125;&#123;&#123; if .Prompt &#125;&#125;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .Prompt &#125;&#125;&lt;|eot_id|&gt;&#123;&#123; end &#125;&#125;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .Response &#125;&#125;&lt;|eot_id|&gt;&quot;</span><br><span class="line">PARAMETER stop &lt;|start_header_id|&gt;</span><br><span class="line">PARAMETER stop &lt;|end_header_id|&gt;</span><br><span class="line">PARAMETER stop &lt;|eot_id|&gt;</span><br><span class="line">PARAMETER num_ctx 4096</span><br><span class="line">PARAMETER num_keep 4</span><br><span class="line">LICENSE &quot;&quot;&quot; Apache License  Version 2.0, January 2004 &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>




<h4 id="添加系统提示"><a href="#添加系统提示" class="headerlink" title="添加系统提示"></a>添加系统提示</h4><p>准备好您的系统提示（System Prompt），例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-----英文 Prompt Start------</span><br><span class="line"></span><br><span class="line">## Role and Goal:</span><br><span class="line"></span><br><span class="line">You are a scientific research paper reviewer, skilled in writing high-quality English scientific research papers. Your main task is to accurately and academically translate Chinese text into English, maintaining the style consistent with English scientific research papers. Users are instructed to input Chinese text directly, which will automatically initiate the translation process into English.</span><br><span class="line"></span><br><span class="line">## Constraints:</span><br><span class="line"></span><br><span class="line">Input is provided in Markdown format, and the output must also retain the original Markdown format.</span><br><span class="line">Familiarity with specific terminology translations is essential.</span><br><span class="line"></span><br><span class="line">## Guidelines:</span><br><span class="line">The translation process involves three steps, with each step&#x27;s results being printed:</span><br><span class="line">1. Translate the content directly from Chinese to English, maintaining the original format and not omitting any information.</span><br><span class="line">2. Identify specific issues in the direct translation, such as non-native English expressions, awkward phrasing, and ambiguous or difficult-to-understand parts. Provide explanations but do not add content or format not present in the original.</span><br><span class="line">3. Reinterpret the translation based on the direct translation and identified issues, ensuring the content remains true to the original while being more comprehensible and in line with English scientific research paper conventions.</span><br><span class="line"></span><br><span class="line">## Clarification:</span><br><span class="line"></span><br><span class="line">If necessary, ask for clarification on specific parts of the text to ensure accuracy in translation.</span><br><span class="line"></span><br><span class="line">## Personalization:</span><br><span class="line"></span><br><span class="line">Engage in a scholarly and formal tone, mirroring the style of academic papers, and provide translations that are academically rigorous.</span><br><span class="line"></span><br><span class="line">## Output format:</span><br><span class="line"></span><br><span class="line">Please output strictly in the following format</span><br><span class="line"></span><br><span class="line">### Direct Translation</span><br><span class="line">&#123;Placeholder&#125;</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">### Identified Issues</span><br><span class="line">&#123;Placeholder&#125;</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">### Reinterpreted Translation</span><br><span class="line">&#123;Placeholder&#125;</span><br><span class="line"></span><br><span class="line">Please translate the following content into English:</span><br><span class="line"></span><br><span class="line">-----英文 Prompt End------</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="创建新模型版本"><a href="#创建新模型版本" class="headerlink" title="创建新模型版本"></a>创建新模型版本</h4><p>执行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama create myllama3 -f myllama3.modelfile</span><br></pre></td></tr></table></figure>
<p>完成后将显示 “success”。</p>
<p><img src="/imgs/a/models/a.jpg" alt="learn2"></p>
<h4 id="检查新建的模型版本"><a href="#检查新建的模型版本" class="headerlink" title="检查新建的模型版本"></a>检查新建的模型版本</h4><p>运行 <code>ollama ls</code>，查看是否已成功创建。</p>
<p><img src="/imgs/a/models/b.jpg" alt="learn2"></p>
<p>运行 <code>ollama run myllama3</code>，查看效果。</p>
<h5 id="如何引入新模型（HF转换成guff文件）"><a href="#如何引入新模型（HF转换成guff文件）" class="headerlink" title="如何引入新模型（HF转换成guff文件）"></a>如何引入新模型（HF转换成guff文件）</h5><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29sbGFtYS9vbGxhbWEvYmxvYi9tYWluL2RvY3MvaW1wb3J0Lm1k">Import a model<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dnZXJnYW5vdi9sbGFtYS5jcHA=">llama.cpp<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL09wZW5CTUIvbGxhbWEuY3BwL3RyZWUvbWluaWNwbS12Mi41L2V4YW1wbGVzL21pbmljcG12">llama定制化(minicpmv)<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h4 id="ModelFile模型文件描述"><a href="#ModelFile模型文件描述" class="headerlink" title="ModelFile模型文件描述"></a>ModelFile模型文件描述</h4><h5 id="指令参数"><a href="#指令参数" class="headerlink" title="指令参数"></a>指令参数</h5><table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FROM (必填)</td>
<td>定义要使用的基本模型。</td>
</tr>
<tr>
<td>PARAMETER</td>
<td>设置 Ollama 如何运行模型的参数。</td>
</tr>
<tr>
<td>TEMPLATE</td>
<td>要发送到模型的完整提示模板。</td>
</tr>
<tr>
<td>SYSTEM</td>
<td>指定将在模板中设置的系统消息。</td>
</tr>
<tr>
<td>ADAPTER</td>
<td>定义要应用于模型的（Q）LoRA 适配器。</td>
</tr>
<tr>
<td>LICENSE</td>
<td>指定合法许可证。</td>
</tr>
<tr>
<td>MESSAGE</td>
<td>指定消息历史记录。</td>
</tr>
</tbody></table>
<h5 id="详细参数设置"><a href="#详细参数设置" class="headerlink" title="详细参数设置"></a>详细参数设置</h5><table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>值类型</th>
<th>用法示例</th>
</tr>
</thead>
<tbody><tr>
<td>mirostat</td>
<td>启用 Mirostat 采样以控制困惑度。（默认值：0、0  &#x3D; 禁用、1 &#x3D; 开启）</td>
<td>int</td>
<td><code>mirostat=1</code></td>
</tr>
<tr>
<td>mirostat_eta</td>
<td>影响算法对生成文本反馈的响应速度。较低的学习率将导致调整速度较慢，较高的学习率使算法更具响应性。（默认值：0.1）</td>
<td>float</td>
<td><code>mirostat_eta=0.2</code></td>
</tr>
<tr>
<td>mirostat_tau</td>
<td>控制输出的一致性和多样性的平衡。较低的值将导致文本更加集中连贯。（默认值：5.0）</td>
<td>float</td>
<td><code>mirostat_tau=4.0</code></td>
</tr>
<tr>
<td>num_ctx</td>
<td>设置用于生成下一个标记的上下文窗口大小。（默认值：2048）</td>
<td>int</td>
<td><code>num_ctx=4096</code></td>
</tr>
<tr>
<td>num_gqa</td>
<td>Transformer 层中 GQA 组数。某些型号需要，例如 llama2:70b 为 8</td>
<td>int</td>
<td><code>num_gqa=2</code></td>
</tr>
<tr>
<td>num_gpu</td>
<td>要发送到 GPU 的层数。在 macOS 上，默认为 1 开启金属支持，0 禁用。</td>
<td>int</td>
<td><code>num_gpu=1</code></td>
</tr>
<tr>
<td>num_thread</td>
<td>设置计算期间使用的线程数。默认情况下，Ollama 将检测到这一点以获得最佳性能。建议将此值设置为系统具有的物理 CPU 核心数（而不是逻辑核心数）。</td>
<td>int</td>
<td><code>num_thread=4</code></td>
</tr>
<tr>
<td>repeat_last_n</td>
<td>设置模型回溯多远以防止重复。（默认值：64，0 &#x3D; 禁用，-1 &#x3D; num_ctx）</td>
<td>int</td>
<td><code>repeat_last_n=32</code></td>
</tr>
<tr>
<td>repeat_penalty</td>
<td>设置惩罚重复的强度。较高的值（例如，1.5）将更强烈地惩罚重复，较低的值（例如，0.9）将更宽松。（默认值：1.1）</td>
<td>float</td>
<td><code>repeat_penalty=1.2</code></td>
</tr>
<tr>
<td>temperature</td>
<td>模型温度。提高温度将使模型答案更有创意。（默认值：0.8）这个值越低准确率越高。</td>
<td>float</td>
<td><code>temperature=0.9</code></td>
</tr>
<tr>
<td>seed</td>
<td>设置用于生成的随机数种子。将其设置为特定数字将使模型为相同的提示生成相同的文本。（默认值：0）</td>
<td>int</td>
<td><code>seed=42</code></td>
</tr>
<tr>
<td>stop</td>
<td>设置要使用的停止序列。当遇到这种模式时，LLM 将停止生成文本并返回。可以通过 stop 在模型文件中指定多个单独参数来设置多个停止模式。</td>
<td>string</td>
<td><code>stop=&quot;AI assistant:&quot;</code></td>
</tr>
<tr>
<td>tfs_z</td>
<td>无尾采样用于减少输出中不太可能的标记影响。较高的值（例如，2.0）将更多地减少影响，1.0 将禁用此设置。（默认值：1）</td>
<td>float</td>
<td><code>tfs_z=1.5</code></td>
</tr>
<tr>
<td>num_predict</td>
<td>生成文本时要预测的最大标记数。（默认值：128，-1 &#x3D; 无限生成，-2 &#x3D; 填充上下文）</td>
<td>int</td>
<td><code>num_predict=64</code></td>
</tr>
<tr>
<td>top_k</td>
<td>减少产生废话的可能性。较高的值（例如 100）将给出更多样化答案，较低的值（例如 10）将更加保守。（默认值：40）</td>
<td>int</td>
<td><code>top_k=30</code></td>
</tr>
<tr>
<td>top_p</td>
<td>与 top-k 一起工作。较高的值（例如，0.95）将导致更多样化文本，较低的值（例如，0.5）将生成更集中和保守文本。（默认值：0.9）</td>
<td>float</td>
<td><code>top_p=0.8</code></td>
</tr>
</tbody></table>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ollama/" rel="tag"># ollama</a>
              <a href="/tags/%E5%85%A5%E9%97%A8/" rel="tag"># 入门</a>
              <a href="/tags/%E6%96%B0%E6%89%8B%E6%95%99%E7%A8%8B/" rel="tag"># 新手教程</a>
              <a href="/tags/%E6%89%8B%E5%86%8C/" rel="tag"># 手册</a>
              <a href="/tags/%E5%BE%AE%E8%B0%83/" rel="tag"># 微调</a>
              <a href="/tags/%E9%87%8F%E5%8C%96/" rel="tag"># 量化</a>
              <a href="/tags/%E5%AE%9A%E5%88%B6%E5%8C%96/" rel="tag"># 定制化</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/03/06/2024-03-06-ComfyUI-%E6%96%B0%E6%89%8B%E6%95%99%E7%A8%8B/" rel="prev" title="ComfyUI - 新手教程">
      <i class="fa fa-chevron-left"></i> ComfyUI - 新手教程
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/06/07/2024-06-07-Hexo%E5%85%A8%E5%B1%80inject%E8%87%AA%E5%AE%9A%E4%B9%89JS%E8%84%9A%E6%9C%AC/" rel="next" title="Hexo全局Inject自定义JS脚本">
      Hexo全局Inject自定义JS脚本 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC81NDA1OS8zMDUzMQ=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A7%81%E6%9C%89%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.</span> <span class="nav-text">拥有自己的私有大模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E8%A8%80"><span class="nav-number">1.1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.2.</span> <span class="nav-text">准备工作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Modelfile"><span class="nav-number">1.3.</span> <span class="nav-text">创建 Modelfile</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E6%8F%90%E7%A4%BA"><span class="nav-number">1.4.</span> <span class="nav-text">添加系统提示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E6%A8%A1%E5%9E%8B%E7%89%88%E6%9C%AC"><span class="nav-number">1.5.</span> <span class="nav-text">创建新模型版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E6%96%B0%E5%BB%BA%E7%9A%84%E6%A8%A1%E5%9E%8B%E7%89%88%E6%9C%AC"><span class="nav-number">1.6.</span> <span class="nav-text">检查新建的模型版本</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%BC%95%E5%85%A5%E6%96%B0%E6%A8%A1%E5%9E%8B%EF%BC%88HF%E8%BD%AC%E6%8D%A2%E6%88%90guff%E6%96%87%E4%BB%B6%EF%BC%89"><span class="nav-number">1.6.1.</span> <span class="nav-text">如何引入新模型（HF转换成guff文件）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ModelFile%E6%A8%A1%E5%9E%8B%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0"><span class="nav-number">1.7.</span> <span class="nav-text">ModelFile模型文件描述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E5%8F%82%E6%95%B0"><span class="nav-number">1.7.1.</span> <span class="nav-text">指令参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%A6%E7%BB%86%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE"><span class="nav-number">1.7.2.</span> <span class="nav-text">详细参数设置</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ghyghoo8</p>
  <div class="site-description" itemprop="description">碎了一地...o(*￣︶￣*)o...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ghyghoo8</span>
</div>
  <div class="powered-by">Powered by <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly9waXNjZXMudGhlbWUtbmV4dC5vcmc=">NexT.Pisces</span>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

<!-- hexo injector body_end start -->
<script src="/js/bot.js"></script>
<div id="sakana-widget"></div><script>
      function initSakanaWidget() {
        // 默认自走模式
        new SakanaWidget().mount('#sakana-widget').triggetAutoMode();
      }
    </script><script
      async
      onload="initSakanaWidget()"
      src="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.js"
    ></script><!-- hexo injector body_end end --></body>
</html>
